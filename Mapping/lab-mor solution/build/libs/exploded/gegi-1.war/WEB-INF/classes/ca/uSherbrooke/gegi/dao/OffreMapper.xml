<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ca.uSherbrooke.gegi.dao.OffreMapper" >

	
	<select id="selectOffre" resultType="Offre">
	    SELECT *
	    from projets3.v_offres;
	</select>

    <insert id="insertOffre" useGeneratedKeys="false" parameterType="map" >
        INSERT into projets3.offres (cip, id_ville,libelle_offre, dateoffre, nombre_de_place,
                                     bagage, nom_car, id_campus,datepresentement)
        values (#{cip},#{id_ville},#{libelle_offre},#{dateoffre},
                    #{nombre_de_place},#{bagage},#{nom_car},#{id_campus},#{datepresentement})
    </insert>

    <update id="ReserverOffre" useGeneratedKeys="false" parameterType="map">
        UPDATE projets3.offres set
            nombre_de_place = nombre_de_place-1
        where id_offre = #{id_offre}
    </update>

    <delete id="deleteOffre">
        delete from projets3.offres
        where nombre_de_place = 0
    </delete>


</mapper>